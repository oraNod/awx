# SOME DESCRIPTIVE TITLE.
# Copyright (C) 2021, Red Hat Inc.
# This file is distributed under the same license as the Automation Controller Administration Guide package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
msgid ""
msgstr ""
"Project-Id-Version: Automation Controller Administration Guide 4.3.0\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2022-11-04 09:32+0100\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../../source/secret_handling.rst:5
msgid "Secret handling and connection security"
msgstr "Secret 处理和连接安全"

#: ../../source/secret_handling.rst:8
msgid "This document describes how |RHAT| handles secrets and connections in a secure fashion."
msgstr "本文档描述了 |RHAT| 如何以安全的方式处理 secret 和连接。"

#: ../../source/secret_handling.rst:12
msgid "Secret Handling"
msgstr "Secret 处理"

#: ../../source/secret_handling.rst:14
msgid "|at| manages three sets of secrets:"
msgstr "|at| 管理三组 secret："

#: ../../source/secret_handling.rst:16
msgid "user passwords for local |at| users"
msgstr "用于本地 |at| 用户的用户密码"

#: ../../source/secret_handling.rst:18
msgid "secrets for |at| operational use (database password, message bus password, etc.)"
msgstr "用于 |at| 操作的 secret（数据库密码、消息总线密码等）"

#: ../../source/secret_handling.rst:21
msgid "secrets for automation use (SSH keys, cloud credentials, external password vault credentials, etc.)"
msgstr "用于自动化的 secret（SSH 密钥、云凭证、外部密码存储库凭证等）"

#: ../../source/secret_handling.rst:25
msgid "User passwords for local users"
msgstr "本地用户的用户密码"

#: ../../source/secret_handling.rst:27
msgid "|at| hashes local |at| user passwords with the PBKDF2 algorithm using a SHA256 hash. Users who authenticate via external account mechanisms (LDAP, SAML, OAuth, and others) do not have any password or secret stored."
msgstr "|at| 使用 SHA256 哈希通过 PBKDF2 算法来哈希处理本地 |at| 用户密码。通过外部帐户机制（LDAP、SAML、OAuth 和其他）进行身份验证的用户不会存储任何密码或 secret。"

#: ../../source/secret_handling.rst:33
msgid "Secret handling for operational use"
msgstr "操作使用的 secret 处理"

#: ../../source/secret_handling.rst:41
msgid "|at| contains the following secrets used operationally:"
msgstr "|at| 包含以下在操作中使用的 secret："

#: ../../source/secret_handling.rst:43
msgid "/etc/tower/SECRET_KEY"
msgstr "/etc/tower/SECRET_KEY"

#: ../../source/secret_handling.rst:45
msgid "A secret key used for encrypting automation secrets in the database (see below). If the SECRET_KEY changes or is unknown, no encrypted fields in the database will be accessible."
msgstr "用于加密数据库中自动化 secret 的 secret 键（参见下面的）。如果 SECRET_KEY 被更改或者未知，则无法访问数据库中的加密字段。"

#: ../../source/secret_handling.rst:49
msgid "/etc/tower/tower.{cert,key}"
msgstr "/etc/tower/tower.{cert,key}"

#: ../../source/secret_handling.rst:51
msgid "SSL certificate and key for the |at| web service. A self-signed cert/key is installed by default; the customer can provide a locally appropriate certificate and key."
msgstr "|at| web 服务的 SSL 证书和密钥。默认安装自签名的证书/密钥；客户可提供适合本地的证书和密钥。"

#: ../../source/secret_handling.rst:55
msgid "Database password in /etc/tower/conf.d/postgres.py and message bus password in /etc/tower/conf.d/channels.py"
msgstr "数据库密码在 /etc/tower/conf.d/postgres.py 中，消息总线密码在/etc/tower/conf.d/channels.py 中"

#: ../../source/secret_handling.rst:58
msgid "Passwords for connecting to |at| component services"
msgstr "用于连接至 |at| 组件服务的密码"

#: ../../source/secret_handling.rst:60
msgid "These secrets are all stored unencrypted on the |at| server, as they are all needed to be read by the |at| service at startup in an automated fashion. All secrets are protected by Unix permissions, and restricted to root and the |at| service user awx."
msgstr "这些 secret 都存储在 |at| 服务器上，因为它们都是需要由 |at| 服务以自动方式读取。所有 secret 都受到 Unix 权限的保护，并限制为 root 和 |at| 服务用户 awx。"

#: ../../source/secret_handling.rst:65
msgid "If hiding of these secrets is required, the files that these secrets are read from are interpreted Python. These files can be adjusted to retrieve these secrets via some other mechanism anytime a service restarts. Doing so is a customer provided modification that may need to be reapplied every upgrade. Red Hat Support and Red Hat Consulting has examples of such modifications."
msgstr "如果需要隐藏这些 secret，则从中读取这些 secret 的文件会被做为 Python 进行解析。这些文件可以调整为通过其它机制在服务重启时获取这些 secret。此操作是客户提供的修改，可能需要在每次升级时重新应用这些修改。红帽支持和红帽咨询会有此类修改的示例。"

#: ../../source/secret_handling.rst:69
msgid "If the secrets system is down, the controller will be unable to get the information and may fail in a way that would be recoverable once the service is restored. Using some redundancy on that system is highly recommended."
msgstr "如果 secrets 系统停机，则控制器将无法获取信息，并可能会导致失败，当服务被恢复后，这个失败可以被修复。我们强烈建议您在该系统中使用一些冗余功能。"

#: ../../source/secret_handling.rst:72
msgid "If, for any reason you believe the ``SECRET_KEY`` the controller generated for you has been compromised and needs to be regenerated, you can run a tool from the installer that behaves much like the controller backup and restore tool. To generate a new secret key:"
msgstr "如果出于某种原因，您认为为您生成的 ``SECRET_KEY`` 控制器已被破坏，需要重新生成，您可以从安装程序运行一个工具，它和控制器备份和恢复工具非常相似。要生成新的密钥，请执行以下操作："

#: ../../source/secret_handling.rst:74
msgid "**Backup your controller database before you do anything else!** Follow the procedure described in the :ref:`Backing Up and Restoring <administration:ag_backup_restore>` section of this guide."
msgstr "**在执行其它操作前备份您的控制器数据库！** 按照本指南的 :ref:`Backing Up and Restoring <administration:ag_backup_restore>` 部分所述步骤操作。"

#: ../../source/secret_handling.rst:76
msgid "Using the inventory from your install (same inventory with which you run backups/restores), run ``setup.sh -k``."
msgstr "使用您安装的清单（与您运行备份/恢复的清单相同），运行 ``setup.sh -k``。"

#: ../../source/secret_handling.rst:78
msgid "A backup copy of the prior key is saved in ``/etc/tower/``."
msgstr "之前密钥的备份副本保存在 ``/etc/tower/`` 中。"

#: ../../source/secret_handling.rst:82
msgid "Secret handling for automation use"
msgstr "用于自动化使用的 secret 处理"

#: ../../source/secret_handling.rst:84
msgid "|at| stores a variety of secrets in the database that are either used for automation or are a result of automation. These secrets include:"
msgstr "|at| 在数据库中存储各种用于自动化的 secret 或自动化生成的 secret。这些 secret 包括："

#: ../../source/secret_handling.rst:88
msgid "all secret fields of all credential types (passwords, secret keys, authentication tokens, secret cloud credentials)"
msgstr "所有凭证类型（密码、密钥、验证令牌、secret 云凭证）的所有 secret 字段"

#: ../../source/secret_handling.rst:91
msgid "secret tokens and passwords for external services defined in |at| settings"
msgstr "|at| 设置中定义的外部服务的 secret 令牌和密码"

#: ../../source/secret_handling.rst:93
msgid "“password” type survey fields entries"
msgstr "“密码”类型调查字段条目"

#: ../../source/secret_handling.rst:95
msgid "To encrypt secret fields, the controller uses AES in CBC mode with a 256-bit key for encryption, PKCS7 padding, and HMAC using SHA256 for authentication. The encryption/decryption process derives the AES-256 bit encryption key from the SECRET_KEY (described above), the field name of the model field and the database assigned auto-incremented record ID. Thus, if any attribute used in the key generation process changes, the controller fails to correctly decrypt the secret. |at| is designed such that the SECRET_KEY is never readable in playbooks |at| launches, that these secrets are never readable by the controller users, and no secret field values are ever made available via the |at| REST API. If a secret value is used in a playbook, we recommend using `no_log` on the task so that it is not accidentally logged."
msgstr "要加密 secret 字段，控制器使用 CBC 模式的 AES 与 256 位密钥进行加密、PKCS7 补丁和 HMAC 使用 SHA256 进行身份验证。加密/解密过程从 SECRET_KEY（上述）生成 AES-256 位加密密钥，模型字段的字段名称和数据库分配的自动递增记录 ID。因此，如果密钥生成过程中使用的任何属性发生更改，控制器无法正确解密 secret。|at| 设计为 SECRET_KEY 在 playbooks |at| 启动中不可读取，这些 secret 也不可由控制器用户读取，没有 secret 字段值通过 |at| REST API 可用。如果在 playbook 中使用 secret 值，我们建议在任务上使用 `no_log`，以便不会意外登录。"

#: ../../source/secret_handling.rst:110
msgid "Connection Security"
msgstr "连接安全性"

#: ../../source/secret_handling.rst:113
msgid "Internal Services"
msgstr "内部服务"

#: ../../source/secret_handling.rst:115
msgid "|at| connects to the following services as part of internal operation:"
msgstr "|at| 作为内部操作的一部分连接到以下服务："

#: ../../source/secret_handling.rst:118
msgid "PostgreSQL database"
msgstr "PostgreSQL 数据库"

#: ../../source/secret_handling.rst:120
msgid "A Redis key/value store"
msgstr "Redis 键/值存储"

#: ../../source/secret_handling.rst:122
msgid "The connection to redis is over a local unix socket, restricted to the awx service user."
msgstr "到 redis 的连接通过本地 unix 套接字进行，仅限于 awx 服务用户。"

#: ../../source/secret_handling.rst:125
msgid "The connection to the PostgreSQL database is done via password authentication over TCP, either via localhost or remotely (external database). This connection can use PostgreSQL’s built in support for SSL/TLS, as natively configured by the installer support. SSL/TLS protocols are configured by the default OpenSSL configuration."
msgstr "与 PostgreSQL 数据库的连接是通过 TCP 的密码身份验证完成的，可以是通过本地或远程（外部数据库）。这个连接可以使用 PostgreSQL 构建的 SSL/TLS 支持，作为安装程序支持的原生配置。SSL/TLS 协议由默认的 OpenSSL 配置来配置。"

#: ../../source/secret_handling.rst:133
msgid "External Access"
msgstr "外部访问"

#: ../../source/secret_handling.rst:135
msgid "|at| is accessed via standard HTTP/HTTPS on standard ports, provided by nginx. A self-signed cert/key is installed by default; the customer can provide a locally appropriate certificate and key. SSL/TLS algorithm support is configured in the /etc/nginx/nginx.conf configuration file. An “intermediate” profile is used by default, and can be configured by the customer. Customer changes must be reapplied on each update."
msgstr "|at| 通过标准端口上的标准 HTTP/HTTPS 访问。默认情况下会安装自签名的证书/密钥；客户可提供适合本地的证书和密钥。SSL/TLS 算法支持是在 /etc/nginx/nginx.conf 配置文件中配。默认情况下会使用“中间”配置文件，并可由客户配置。客户每次更新都必须重新应用客户的更改。"

#: ../../source/secret_handling.rst:144
msgid "Managed Nodes"
msgstr "受管的节点"

#: ../../source/secret_handling.rst:146
msgid "|at| also connects to managed machines and services as part of automation. All connections to managed machines are done via standard secure mechanism as specified such as SSH, WinRM, SSL/TLS, and so on - each of these inherits configuration from the system configuration for the feature in question (such as the system OpenSSL configuration)."
msgstr "作为自动化的一部分，|at| 也连接到受管机器和服务。所有连接到受管机器的连接都是通过指定的标准安全机制完成，如 SSH、WinRM、SSL/TLS 等——其中每项都继承了系统配置中有关功能的配置（如系统 OpenSSL 配置）。"

