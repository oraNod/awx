# Read the Docs configuration file
# See https://docs.readthedocs.io/en/stable/config-file/v2.html for details

# RTD API version
version: 2

build:
  os: ubuntu-22.04
  tools:
    python: "3.11"
  # Build with make
  commands:
    - python -m pip install --upgrade --no-cache-dir pip
    - python -m pip install --exists-action=w --no-cache-dir ./requirements.txt
    - make html
    - mkdir _readthedocs/html/
    - rsync -az administration/build/html/ _readthedocs/html/administration
    - rsync -az controllerapi/build/html/ _readthedocs/html/controllerapi
    - rsync -az quickstart/build/html/ _readthedocs/html/quickstart
    - rsync -az upgrade-migration-guide/build/html/ _readthedocs/html/upgrade-migration-guide
    - rsync -aR userguide/build/html/ _readthedocs/html/userguide

# Use RTD sphinx build
#python:
#   install:
#   - requirements: ./requirements.txt
#   - requirements: ./test/sanity/code-smell/docs-build.requirements.txt
#sphinx:
#   builder: dirhtml
#   configuration: docs/docsite/rst/conf.py
