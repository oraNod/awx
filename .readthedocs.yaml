# Read the Docs configuration file
# See https://docs.readthedocs.io/en/stable/config-file/v2.html for details

# RTD API version
version: 2

build:
  os: ubuntu-22.04
  tools:
    python: "3.11"
  commands:
    - apt install rsync -y
    - python -m pip install --upgrade --no-cache-dir pip
    - python -m pip install --exists-action=w --no-cache-dir -r ./docs/docsite/requirements.txt
    - sphinx-build -aE -b html -c ./docs/docsite ./docs/docsite/rst build/html
    - mkdir -p _readthedocs/html/
    - cp -r build/html/* _readthedocs/html/

# Use RTD sphinx build
#python:
#   install:
#   - requirements: ./requirements.txt
#   - requirements: ./test/sanity/code-smell/docs-build.requirements.txt
#sphinx:
#   builder: dirhtml
#   configuration: docs/docsite/rst/conf.py
